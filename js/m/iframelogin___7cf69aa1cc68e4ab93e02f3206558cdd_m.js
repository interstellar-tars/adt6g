;// bundle: iframelogin___7cf69aa1cc68e4ab93e02f3206558cdd_m
;// files: jquery.ba-postmessage.min.js, iFrameLogin.js

;// jquery.ba-postmessage.min.js
/*
 * jQuery postMessage - v0.5 - 9/11/2009
 * http://benalman.com/projects/jquery-postmessage-plugin/
 * 
 * Copyright (c) 2009 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($){var g,d,j=1,a,b=this,f=!1,h="postMessage",e="addEventListener",c,i=b[h]&&!$.browser.opera;$[h]=function(k,l,m){if(!l){return}k=typeof k==="string"?k:$.param(k);m=m||parent;if(i){m[h](k,l.replace(/([^:]+:\/\/[^\/]+).*/,"$1"))}else{if(l){m.location=l.replace(/#.*$/,"")+"#"+(+new Date)+(j++)+"&"+k}}};$.receiveMessage=c=function(l,m,k){if(i){if(l){a&&c();a=function(n){if((typeof m==="string"&&n.origin!==m)||($.isFunction(m)&&m(n.origin)===f)){return f}l(n)}}if(b[e]){b[l?e:"removeEventListener"]("message",a,f)}else{b[l?"attachEvent":"detachEvent"]("onmessage",a)}}else{g&&clearInterval(g);g=null;if(l){k=typeof m==="number"?m:typeof k==="number"?k:100;g=setInterval(function(){var o=document.location.hash,n=/^#?\d+&/;if(o!==d&&n.test(o)){d=o;l({data:o.replace(n,"")})}},k)}}}})(jQuery);

;// iFrameLogin.js
typeof Roblox=="undefined"&&(Roblox={});Roblox.iFrameLogin=new function(){function f(){var a=$(document.body).data("redirecttohttp"),e=$(document.body).data("captchaon"),o=!1,h=!0,s=function(n){var t=$(document.body).data("parent-url");$.postMessage("resize,"+n,t,parent)};e?s("265px"):s("128px");var c=function(n){n?($("#LoginButton").hide(),$("#LoggingInStatus").show()):($("#LoginButton").show(),$("#LoggingInStatus").hide())},v=function(){var n=!1,t=[$("#Password"),$("#UserName")];return e&&t.push($("#recaptcha_response_field")),jQuery.each(t,function(){var t=$(this);t.val()==""?(f(t,!0),n=!0):f(t,!1)}),n},f=function(n,t){o=!1;c(!1);t?n.css({"background-color":"#FDD"}):n.css({"background-color":"white"})},l=function(){var w;if(v())return!1;if(h)return f($("#UserName"),!0),!1;o=!0;c(!0);var b=$("#Password").val(),l=$("#UserName").val(),y="",p="";if(e&&(y=$("#recaptcha_challenge_field").val(),p=$("#recaptcha_response_field").val(),y==""||p==""))return f($("#recaptcha_response_field"),!0),!1;e&&$("#Captcha_upBadCaptcha").text("");w=onError=function(h){if(h.IsValid){var v;v=a?$(document.body).data("parent-url"):window.parent.location.href;v.indexOf("#")!=-1&&(v=window.parent.location.href.split("#")[0]);v+=v.indexOf("?")==-1?"?nl=true":"&nl=true";window.parent.location=v}else return h.ErrorCode.indexOf(r)!=-1?(l!=""&&window.location.href.indexOf("username")==-1?window.location.href=window.location.href+"&username="+l:window.location.reload(),!1):(h.ErrorCode.indexOf(t)!=-1&&(window.parent.location="/login/twofactorauth?username="+encodeURIComponent(l)),h.ErrorCode.indexOf(u)!=-1?(f($("#Password"),!0),$("#NotAMemberLink").hide(),$("#ForgotPasswordLink").show()):h.ErrorCode.indexOf(n)!=-1?(s("145px"),$("#ErrorMessage").text(h.Message)):h.ErrorCode.indexOf(i)!=-1?$("#ErrorMessage").text(h.Message):(s("280px"),f($("#Password"),!1),$("#Captcha_upBadCaptcha").show(),$("#Captcha_upBadCaptcha").css("color","red"),h.Message=="incorrect-captcha-sol"?$("#Captcha_upBadCaptcha").text(Roblox.iFrameLogin.Resources.invalidCaptchaEntry):$("#Captcha_upBadCaptcha").text(h.Message)),e&&Recaptcha.reload("t"),$("#Password").val(""),$("#Password").focus(),o=!1,c(!1),!1)};Roblox.Website.Services.Secure.LoginService.ValidateLogin(l,b,e,y,p,w,onError)},y=function(){var n=$("#UserName").val(),t;n=n.replace(/ /g,"");$("#UserName").val(n);t=onError=function(n){f($("#UserName"),!n.success);h=!n.success;n.success||($("#NotAMemberLink").show(),$("#ForgotPasswordLink").hide())};n!=""&&$.ajax({type:"GET",url:"/UserCheck/doesusernameexist?username="+n,success:t,error:onError})};$("#LoginButton").click(function(){l()});$("#UserName").blur(function(){y()});$(document).keydown(function(n){if(n.which==13&&!o)return l(),!1});$(function(){var n=1;$("input,select").each(function(){if(this.type!="hidden"){var t=$(this);t.attr("tabindex",n);n++}})});$(function(){$("#UserName").val()!=""||$("#UserName").val()!=undefined;h=!1});$(function(){$("#CaptchaContainer").css({"margin-left":"0","margin-top":"8px",width:"none"})})}var n="3",t="4",i="5",r="6",u="7";return{init:f}};
