;// bundle: page___819dfaaf2ff7ef6f50ad3e6824f29c4f_m
;// files: SuperSafePrivacyIndicator.js, jquery.simplemodal-1.3.5.js, GenericModal.js, DataPager.js, Sets/SetsPane.js, extensions/string.js, widgets/accordion.js, UserPlacesPane.js, ItemPurchase.js, modules/Widgets/ItemImage.js, Universes/PlaceSelectorModal.js, UserAssetsPane.js, CreateSetPanel.js, fileUploadUnsupported.js, GenericConfirmation.js

;// SuperSafePrivacyIndicator.js
typeof Roblox=="undefined"&&(Roblox={});typeof Roblox.SuperSafePrivacyMode=="undefined"&&(Roblox.SuperSafePrivacyMode=function(){function n(){Roblox.GenericModal.open(Roblox.SuperSafePrivacyMode.Resources.modalTitle,null,Roblox.SuperSafePrivacyMode.Resources.modalMsg,function(){})}function t(){$("[data-js-supersafeprivacymode]").each(function(t,i){var r=$(i),u=r.parent(),f;if(r.hasClass("SuperSafePrivacyModeImg")){if(r.click(function(){n()}),u.attr("data-js-supersafe-specialstyle")==="True")return;u=u.parent();r.parent().css("left",u.find("input[data-js-supersafeprivacymode],textarea[data-js-supersafeprivacymode]").outerWidth()-r.outerWidth())}else f=$("<div />"),f.css({position:"absolute",top:r.position().top,left:r.position().left,width:r.outerWidth(),height:r.outerHeight(),zIndex:1e3,backgroundColor:"#fff",opacity:0}).click(function(){n()}),u.append(f)})}return{initModals:t,openSuperSafeModal:n}}(),Roblox.SuperSafePrivacyMode.Resources={modalMsg:"This feature is locked for users under 13 years of age. If your birthday is incorrect, go to the <a href='/My/Account.aspx'>Account<\/a> page to update it.",modalTitle:"Update Your Age"});$(function(){Roblox.SuperSafePrivacyMode.initModals()});

;// jquery.simplemodal-1.3.5.js
(function(n){typeof define=="function"&&define.amd?define(["jquery"],n):n(jQuery)})(function(n){var r=[],e=n(document),u=navigator.userAgent.toLowerCase(),f=n(window),i=[],t={ieQuirks:null,msie:/msie/.test(u)&&!/opera/.test(u),opera:/opera/.test(u)};t.ie6=t.msie&&/msie 6./.test(u)&&typeof XMLHttpRequest!="object";t.ie7=t.msie&&/msie 7.0/.test(u);t.boxModel=document.compatMode==="CSS1Compat";n.modal=function(t,i){return n.modal.impl.init(t,i)};n.modal.close=function(){n.modal.impl.close()};n.modal.focus=function(t){n.modal.impl.focus(t)};n.modal.setContainerDimensions=function(){n.modal.impl.setContainerDimensions()};n.modal.setPosition=function(){n.modal.impl.setPosition()};n.modal.update=function(t,i){n.modal.impl.update(t,i)};n.fn.modal=function(t){return n.modal.impl.init(this,t)};n.modal.defaults={appendTo:"body",focus:!0,opacity:50,overlayId:"simplemodal-overlay",overlayCss:{},containerId:"simplemodal-container",containerCss:{},dataId:"simplemodal-data",dataCss:{},minHeight:null,minWidth:null,maxHeight:null,maxWidth:null,autoResize:!1,autoPosition:!0,zIndex:1e3,close:!0,closeHTML:'<a class="modalCloseImg" title="Close"><\/a>',closeClass:"simplemodal-close",escClose:!0,overlayClose:!1,fixed:!0,position:null,persist:!1,modal:!0,onOpen:null,onShow:null,onClose:null};n.modal.impl={d:{},init:function(i,r){var u=this;if(u.d.data)return!1;if(t.ieQuirks=t.msie&&!(n.support.boxModel===undefined)&&!n.support.boxModel,u.o=n.extend({},n.modal.defaults,r),u.zIndex=u.o.zIndex,u.occb=!1,typeof i=="object")i=i instanceof n?i:n(i),u.d.placeholder=!1,i.parent().parent().size()>0&&(i.before(n("<span><\/span>").attr("id","simplemodal-placeholder").css({display:"none"})),u.d.placeholder=!0,u.display=i.css("display"),u.o.persist||(u.d.orig=i.clone(!0)));else if(typeof i=="string"||typeof i=="number")i=n("<div><\/div>").html(i);else return alert("SimpleModal Error: Unsupported data type: "+typeof i),u;return u.create(i),i=null,u.open(),n.isFunction(u.o.onShow)&&u.o.onShow.apply(u,[u.d]),u},create:function(u){var f=this;f.getDimensions();f.o.modal&&t.ie6&&(f.d.iframe=n('<iframe src="javascript:false;"><\/iframe>').css(n.extend(f.o.iframeCss,{display:"none",opacity:0,position:"fixed",height:i[0],width:i[1],zIndex:f.o.zIndex,top:0,left:0})).appendTo(f.o.appendTo));f.d.overlay=n("<div><\/div>").attr("id",f.o.overlayId).addClass("simplemodal-overlay").css(n.extend(f.o.overlayCss,{display:"none",opacity:f.o.opacity/100,height:f.o.modal?r[0]:0,width:f.o.modal?r[1]:0,position:"fixed",left:0,top:0,zIndex:f.o.zIndex+1})).appendTo(f.o.appendTo);f.d.container=n("<div><\/div>").attr("id",f.o.containerId).addClass("simplemodal-container").css(n.extend({position:f.o.fixed?"fixed":"absolute"},f.o.containerCss,{display:"none",zIndex:f.o.zIndex+2})).append(f.o.close&&f.o.closeHTML?n(f.o.closeHTML).addClass(f.o.closeClass):"").appendTo(f.o.appendTo);f.d.wrap=n("<div><\/div>").attr("tabIndex",-1).addClass("simplemodal-wrap").css({height:"100%",outline:0,width:"100%"}).appendTo(f.d.container);f.d.data=u.attr("id",u.attr("id")||f.o.dataId).addClass("simplemodal-data").css(n.extend(f.o.dataCss,{display:"none"})).appendTo("body");u=null;f.setContainerDimensions();f.d.data.appendTo(f.d.wrap);(t.ie6||t.ieQuirks)&&f.fixIE()},bindEvents:function(){var u=this;n("."+u.o.closeClass).bind("click.simplemodal",function(n){n.preventDefault();u.close()});u.o.modal&&u.o.close&&u.o.overlayClose&&u.d.overlay.bind("click.simplemodal",function(n){n.preventDefault();u.close()});e.bind("keydown.simplemodal",function(n){u.o.modal&&n.keyCode===9?u.watchTab(n):u.o.close&&u.o.escClose&&n.keyCode===27&&(n.preventDefault(),u.close())});f.bind("resize.simplemodal orientationchange.simplemodal",function(){u.getDimensions();u.o.autoResize?u.setContainerDimensions():u.o.autoPosition&&u.setPosition();t.ie6||t.ieQuirks?u.fixIE():u.o.modal&&(u.d.iframe&&u.d.iframe.css({height:i[0],width:i[1]}),u.d.overlay.css({height:r[0],width:r[1]}))})},unbindEvents:function(){n("."+this.o.closeClass).unbind("click.simplemodal");e.unbind("keydown.simplemodal");f.unbind(".simplemodal");this.d.overlay.unbind("click.simplemodal")},fixIE:function(){var i=this,t=i.o.position;n.each([i.d.iframe||null,i.o.modal?i.d.overlay:null,i.d.container.css("position")==="fixed"?i.d.container:null],function(n,i){var a,v,s,h;if(i){var e="document.body.clientHeight",o="document.body.clientWidth",y="document.body.scrollHeight",c="document.body.scrollLeft",l="document.body.scrollTop",p="document.body.scrollWidth",w="document.documentElement.clientHeight",b="document.documentElement.clientWidth",u="document.documentElement.scrollLeft",f="document.documentElement.scrollTop",r=i[0].style;r.position="absolute";n<2?(r.removeExpression("height"),r.removeExpression("width"),r.setExpression("height",""+y+" > "+e+" ? "+y+" : "+e+' + "px"'),r.setExpression("width",""+p+" > "+o+" ? "+p+" : "+o+' + "px"')):(t&&t.constructor===Array?(s=t[0]?typeof t[0]=="number"?t[0].toString():t[0].replace(/px/,""):i.css("top").replace(/px/,""),a=s.indexOf("%")===-1?s+" + (t = "+f+" ? "+f+" : "+l+') + "px"':parseInt(s.replace(/%/,""))+" * (("+w+" || "+e+") / 100) + (t = "+f+" ? "+f+" : "+l+') + "px"',t[1]&&(h=typeof t[1]=="number"?t[1].toString():t[1].replace(/px/,""),v=h.indexOf("%")===-1?h+" + (t = "+u+" ? "+u+" : "+c+') + "px"':parseInt(h.replace(/%/,""))+" * (("+b+" || "+o+") / 100) + (t = "+u+" ? "+u+" : "+c+') + "px"')):(a="("+w+" || "+e+") / 2 - (this.offsetHeight / 2) + (t = "+f+" ? "+f+" : "+l+') + "px"',v="("+b+" || "+o+") / 2 - (this.offsetWidth / 2) + (t = "+u+" ? "+u+" : "+c+') + "px"'),r.removeExpression("top"),r.removeExpression("left"),r.setExpression("top",a),r.setExpression("left",v))}})},focus:function(t){var i=this,u=t&&n.inArray(t,["first","last"])!==-1?t:"first",r=n(":input:enabled:visible:"+u,i.d.wrap);setTimeout(function(){r.length>0?r.focus():i.d.wrap.focus()},10)},getDimensions:function(){var t=this,n=typeof innerHeight=="undefined"?f.height():window.innerHeight;r=[e.height(),e.width()];i=[n,f.width()]},getVal:function(n,t){return n?typeof n=="number"?n:n==="auto"?0:n.indexOf("%")>0?parseInt(n.replace(/%/,""))/100*(t==="h"?i[0]:i[1]):parseInt(n.replace(/px/,"")):null},update:function(n,t){var i=this;if(!i.d.data)return!1;i.d.origHeight=i.getVal(n,"h");i.d.origWidth=i.getVal(t,"w");i.d.data.hide();n&&i.d.container.css("height",n);t&&i.d.container.css("width",t);i.setContainerDimensions();i.d.data.show();i.o.focus&&i.focus();i.unbindEvents();i.bindEvents()},setContainerDimensions:function(){var n=this,v=t.ie6||t.ie7,r=n.d.origHeight?n.d.origHeight:t.opera?n.d.container.height():n.getVal(v?n.d.container[0].currentStyle.height:n.d.container.css("height"),"h"),u=n.d.origWidth?n.d.origWidth:t.opera?n.d.container.width():n.getVal(v?n.d.container[0].currentStyle.width:n.d.container.css("width"),"w"),o=n.d.data.outerHeight(!0),s=n.d.data.outerWidth(!0),f;n.d.origHeight=n.d.origHeight||r;n.d.origWidth=n.d.origWidth||u;var l=n.o.maxHeight?n.getVal(n.o.maxHeight,"h"):null,a=n.o.maxWidth?n.getVal(n.o.maxWidth,"w"):null,h=l&&l<i[0]?l:i[0],c=a&&a<i[1]?a:i[1],e=n.o.minHeight?n.getVal(n.o.minHeight,"h"):"auto";r=r?n.o.autoResize&&r>h?h:r<e?e:r:o?o>h?h:n.o.minHeight&&e!=="auto"&&o<e?e:o:e;f=n.o.minWidth?n.getVal(n.o.minWidth,"w"):"auto";u=u?n.o.autoResize&&u>c?c:u<f?f:u:s?s>c?c:n.o.minWidth&&f!=="auto"&&s<f?f:s:f;n.d.container.css({height:r,width:u});n.d.wrap.css({overflow:o>r||s>u?"auto":"visible"});n.o.autoPosition&&n.setPosition()},setPosition:function(){var n=this,t,r,u=i[0]/2-n.d.container.outerHeight(!0)/2,e=i[1]/2-n.d.container.outerWidth(!0)/2,o=n.d.container.css("position")!=="fixed"?f.scrollTop():0;n.o.position&&Object.prototype.toString.call(n.o.position)==="[object Array]"?(t=o+(n.o.position[0]||u),r=n.o.position[1]||e):(t=o+u,r=e);n.d.container.css({left:r,top:t})},watchTab:function(t){var i=this,r;n(t.target).parents(".simplemodal-container").length>0?(i.inputs=n(":input:enabled:visible:first, :input:enabled:visible:last",i.d.data[0]),(!t.shiftKey&&t.target===i.inputs[i.inputs.length-1]||t.shiftKey&&t.target===i.inputs[0]||i.inputs.length===0)&&(t.preventDefault(),r=t.shiftKey?"last":"first",i.focus(r))):(t.preventDefault(),i.focus())},open:function(){var t=this;t.d.iframe&&t.d.iframe.show();n.isFunction(t.o.onOpen)?t.o.onOpen.apply(t,[t.d]):(t.d.overlay.show(),t.d.container.show(),t.d.data.show());t.o.focus&&t.focus();t.bindEvents()},close:function(){var t=this,i;if(!t.d.data)return!1;t.unbindEvents();n.isFunction(t.o.onClose)&&!t.occb?(t.occb=!0,t.o.onClose.apply(t,[t.d])):(t.d.placeholder?(i=n("#simplemodal-placeholder"),t.o.persist?i.replaceWith(t.d.data.removeClass("simplemodal-data").css("display",t.display)):(t.d.data.hide().remove(),i.replaceWith(t.d.orig))):t.d.data.hide().remove(),t.d.container.hide().remove(),t.d.overlay.hide(),t.d.iframe&&t.d.iframe.hide().remove(),t.d.overlay.remove(),t.d={})}}});

;// GenericModal.js
typeof Roblox.GenericModal=="undefined"&&(Roblox.GenericModal=function(){function e(u,e,o,s,h,c){var l,a;t.isOpen=!0;n=$.extend({},n,c);i=s;l=$("div.GenericModal").filter(":first");l.find("div.Title").text(u);e===null?l.addClass("noImage"):(l.find("img.GenericModalImage").attr("src",e),l.removeClass("noImage"));l.find("div.Message").html(o);h&&(l.removeClass("smallModal"),l.addClass("largeModal"));a=l.find(f);a.attr("class","btn-large "+n.acceptColor);a.unbind();a.bind("click",function(){r()});l.modal(n)}function r(){t.isOpen=!1;$.modal.close();typeof i=="function"&&i()}var u="btn-neutral",f=".ImageButton.btn-neutral.btn-large.roblox-ok",t={isOpen:!1},n={overlayClose:!0,escClose:!0,opacity:80,overlayCss:{backgroundColor:"#000"},acceptColor:u},i;return $(function(){$(document).on("click",".GenericModal .roblox-ok",function(){r()})}),{close:r,open:e,status:t,green:"btn-primary",blue:u,gray:"btn-negative"}}());Roblox.GenericModal.Resources={ErrorText:"Error",ErrorMessage:"Sorry, an error occurred."};$(document).keypress(function(n){n.which===13&&Roblox.GenericModal.status.isOpen&&Roblox.GenericModal.close()});

;// DataPager.js
function DataPager(n,t,i,r,u,f,e,o){function b(){s<1&&(s=1);s>c&&(s=c);h.find(".disabled").removeClass("disabled");a.Paging_PageNumbers_AreLinks?h.find(":contains('"+s+"')").addClass("disabled"):h.find(".CurrentPage").text(s);s==1&&(h.find('[pagingaction="First"]').addClass("disabled"),h.find('[pagingaction="Previous"]').addClass("disabled"),h.find('[pagingaction="Next"]').removeClass("disabled"),h.find('[pagingaction="Last"]').removeClass("disabled"));s==c&&(h.find('[pagingaction="First"]').removeClass("disabled"),h.find('[pagingaction="Previous"]').removeClass("disabled"),h.find('[pagingaction="Next"]').addClass("disabled"),h.find('[pagingaction="Last"]').addClass("disabled"))}function d(){if(elem=$(this),!elem.hasClass("disabled")&&elem.attr("pagingaction")!==undefined){s=parseInt(s,10);switch(elem.attr("pagingaction")){case"First":s=1;break;case"Previous":s-=1;break;case"Next":s+=1;break;case"Last":s=c;break;default:s=elem.html()}s<1&&(s=1);s>c&&(s=c);a.pagingClickFunction?a.pagingClickFunction(s):(l.html('<div class="loading"><\/div>'),v((s-1)*t+1,t))}}function p(){var i,r;if(n<=t){h.html("");return}if(i=$("<span><\/span>").append('<a class="disabled pager first" pagingaction="First">First<\/a><a class="disabled pager previous" pagingaction="Previous">Previous<\/a>'),a.Paging_PageNumbers_AreLinks){for(i.append('<a class="disabled pager page text" pagingaction="PageNum">1<\/a>'),r=t;r<n;r+=t)i.append('<a pagingaction="PageNum">'+(r/t+1)+"<\/a>");i.append('<a class="pager next" pagingaction="Next">Next<\/a><a class="pager last" pagingaction="Last">Last<\/a>')}else i=$("<span><\/span>").append('<a class="disabled pager first" pagingaction="First"><\/a><a class="disabled pager previous" pagingaction="Previous"><\/a>'),i.append('<span class="page text">Page <span class="CurrentPage">1<\/span> of <span class="TotalPages">'+c+"<\/span><\/span>"),i.append('<a class="pager next" pagingaction="Next"><\/a><a class="pager last" pagingaction="Last"><\/a>');i.children().each(function(){$(this).bind("click",d)});h.html($('<div class="JSPager_Container"><\/div>').append(i))}var y;if(!(this instanceof DataPager))return new DataPager(n,containerDivID,u,f);var n=n,t=t,s=1,c=Math.ceil(n/t),l=$("#"+i),h=$("#"+r),v=u,w=f,k=e,a={Paging_PageNumbers_AreLinks:!0,FetchItemsOnLoad:!0,pagingClickFunction:!1};for(y in o)a[y]=o[y];var g=function(n){l.html("");var t=n;l.append(t)},nt=function(i,r){r!=undefined&&(s=r);n=i;(c!=Math.ceil(n/t)||n==t||n==0)&&(c=Math.ceil(n/t),p());b()},tt=function(i){var r,u;if(l.html(""),r=i.data,r==null||r.length==0){l.append(w(r));return}for(u=0;u<r.length;u++)l.append(w(r[u])),k(r[u]);l.append('<div style="clear:both;"><\/div>');n=i.totalItems;c!=Math.ceil(n/t)&&(c=Math.ceil(n/t),p());b()};return function(){a.FetchItemsOnLoad&&v(1,t);n>t&&p()}(),{getItemsPaged:v,update:tt,updateHtml:g,callUpdatePager:nt,totalItems:n,itemContainerDiv:l,getStartIndex:function(){return(s-1)*t+1},getCurrentPage:function(){return s},isLastPage:function(){return c==s}}};

;// Sets/SetsPane.js
typeof Roblox=="undefined"&&(Roblox={});Roblox.SetsPane=function(n,t){function i(t){var i=$("#SetsPaneItemTemplate").clone().removeAttr("id").addClass("TiledSets").show();for(var r in t)typeof t[r]=="string"&&(t[r]=t[r].escapeHTML()),i.html(i.html().replace("$"+r,t[r]));return i.html(i.html().replace("$BaseUrl",n)),i}return this.isVisible=function(n){return n.attr("style").toLowerCase().indexOf("display:none")>-1||n.attr("style").toLowerCase().indexOf("display: none")>-1?!1:!0},this.addEllipses=function(n){var i=!(n===null||n===undefined),r=$(".TiledSets .AssetName a"+(i?":contains('"+n.Name+"')":"")),t;r!=null&&r.each(function(){$(this).html(fitStringToWidthSafe($(this).html(),90))});t=$(".TiledSets .AssetCreator .Detail a"+(i?":contains('"+n.CreatorName+"')":""));t!=null&&t.each(function(){$(this).html(fitStringToWidthSafe($(this).html(),55))})},this.getSetsPaged=function(n,i){$.getJSON("/Sets/SetHandler.ashx?rqtype=getsets&maxsets=10&UserID="+t,function(t){Roblox.OwnedSetsJSDataPager.update({data:t.slice(n-1,n-1+i),totalItems:t.length})})},this.getSubscribedSetsPaged=function(n,i){$.getJSON("/Sets/SetHandler.ashx?rqtype=getsubscribedsets&maxsets=10&UserID="+t,function(t){Roblox.SubscribedSetsJSDataPager.update({data:t.slice(n-1,n-1+i),totalItems:t.length})})},this.ownedItemFormatter=function(n){return typeof n===undefined||n===null||n.length===0?'<div class="NoSets">This user has no sets.<\/div>':i(n)},this.subscribedItemFormatter=function(n){return typeof n===undefined||n===null||n.length===0?'<div class="NoSets">This user is not subscribed to any sets.<\/div>':i(n)},this.getSetAssetImageThumbnail=function(n){$.get("/Thumbs/RawAsset.ashx?AssetID="+n.ImageAssetID+"&Width=75&Height=75&ImageFormat=png",function(t){if(t!==null){if(t=="PENDING"){$(".AssetThumbnail ."+n.ImageAssetID).attr("src","/images/spinners/spinner16x16.gif");window.setTimeout(function(){Roblox.SetsPaneObject.getSetAssetImageThumbnail(n)},2e3);return}$(".AssetThumbnail ."+n.ImageAssetID).attr("src",t)}});Roblox.SetsPaneObject.addEllipses()},this.toggleBetweenSetsOwnedSubscribed=function(){var t=$("#OwnedSetsContainerDiv"),n=$("#SubscribedSetsContainerDiv");Roblox.SetsPaneObject.isVisible(n)?(n.css("display","none"),t.css("display","block"),$("#ToggleBetweenOwnedSubscribedSets").text("View Subscribed"),$("#ToggleBetweenOwnedSubscribedSets").append('<span class="btn-text" id="SetsToggleSpan">View Subscribed<\/span>')):(t.css("display","none"),n.css("display","block"),$("#ToggleBetweenOwnedSubscribedSets").text("View Owned"),$("#ToggleBetweenOwnedSubscribedSets").append('<span class="btn-text" id="SetsToggleSpan">View Owned<\/span>'));Roblox.SetsPaneObject.addEllipses()},this};

;// extensions/string.js
$.extend(String.prototype,function(){function n(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}return{escapeHTML:n}}());

;// widgets/accordion.js
$(function(){$(".accordion").each(function(n,t){var i=0,r=$(t);r.on("click",".accord-header",function(){var n=r.children(),t=n.index($(this).parent().addClass("accord-section-open"));n.eq(i).removeClass("accord-section-open");i=t===i?NaN:t})})});

;// UserPlacesPane.js
$(document).ready(function(){$(".PurchaseButton").each(function(n,t){$(t).unbind().click(function(){return Roblox.PlaceItemPurchase.openPurchaseVerificationView(t),!1})});Roblox.PlaceItemPurchase=new Roblox.ItemPurchase(function(n){$(".PurchaseButton[data-item-id="+n.AssetID+"]").each(function(){$(".PurchaseContainer[data-item-id="+n.AssetID+"]").hide();$(".VisitButtonContainer[data-item-id="+n.AssetID+"]").show()})})});

;// ItemPurchase.js
var Roblox=Roblox||{};Roblox.ItemPurchase=function(n){function r(n){n+="";x=n.split(".");x1=x[0];x2=x.length>1?"."+x[1]:"";for(var t=/(\d+)(\d{3})/;t.test(x1);)x1=x1.replace(t,"$1,$2");return x1+x2}function v(n){return n<1?n+"":n<1e4?r(n):n>=1e6?Math.floor(n/1e6)+"M+":Math.floor(n/1e3)+"K+"}function e(){window.location.href="/login/Default.aspx?ReturnUrl="+encodeURIComponent(location.pathname+location.search)}function o(n){typeof n!="undefined"&&n!==""&&$.modal.close("."+n);$("#ProcessingView").modal({overlayClose:!0,opacity:80,overlayCss:{backgroundColor:"#000"}})}function u(n,t){var r;if(o(t),r=$(n),!r.hasClass("btn-disabled-primary")){var e=r.attr("data-product-id"),h=parseInt(r.attr("data-expected-price")),c=r.attr("data-expected-currency"),u=r.attr("data-placeproductpromotion-id"),l=r.attr("data-expected-seller-id"),f=r.attr("data-userasset-id");$.ajax({type:"POST",url:"/API/Item.ashx?rqtype=purchase&productID="+e+"&expectedCurrency="+c+"&expectedPrice="+h+(u===undefined?"":"&expectedPromoID="+u)+"&expectedSellerID="+l+(f===undefined?"":"&userAssetID="+f),contentType:"application/json; charset=utf-8",success:function(n){n.statusCode==500?($.modal.close(".ProcessingView"),i(n)):($.modal.close(".ProcessingView"),s(n))},error:function(n){$.modal.close(".ProcessingView");var t=$.parseJSON(n.responseText);i(t)}})}}function i(n){var t,o;if(n.showDivID==="TransactionFailureView")Roblox.GenericConfirmation.open({titleText:n.title,bodyContent:n.errorMsg,imageUrl:f,acceptText:Roblox.ItemPurchase.strings.okText,declineColor:Roblox.GenericConfirmation.none,dismissable:!0});else if(n.showDivID==="InsufficientFundsView"){var i="",r="",e=!1;i=n.currentCurrency==1?Roblox.ItemPurchase.strings.buyText+" Robux":Roblox.ItemPurchase.strings.tradeCurrencyText;n.currentCurrency==1&&(e=!0,r=Roblox.ItemPurchase.strings.orText+" <a href='/My/Money.aspx?tab=TradeCurrency' style='font-weight:bold'>"+Roblox.ItemPurchase.strings.tradeCurrencyText+"<\/a>");Roblox.GenericConfirmation.open({titleText:Roblox.ItemPurchase.strings.insufficientFundsTitle,bodyContent:String.format(Roblox.ItemPurchase.strings.insufficientFundsText,"<span class='currency-color CurrencyColor"+n.currentCurrency+"'>"+n.shortfallPrice+"<\/span>"),acceptText:i,acceptColor:Roblox.GenericConfirmation.green,onAccept:function(){window.location="/Upgrades/Robux.aspx"},declineText:Roblox.ItemPurchase.strings.cancelText,imageUrl:f,footerText:r,allowHtmlContentInBody:!0,allowHtmlContentInFooter:e,dismissable:!0})}else n.showDivID==="PriceChangedView"&&(t=$(".PurchaseButton[data-item-id="+n.AssetID+"][data-expected-currency="+n.expectedCurrency+"][data-expected-price="+n.expectedPrice+"]"),o=function(){t.attr("data-expected-price",n.currentPrice);t.attr("data-expected-currency",n.currentCurrency);u(t,"PurchaseVerificationView")},Roblox.GenericConfirmation.open({titleText:Roblox.ItemPurchase.strings.priceChangeTitle,bodyContent:String.format(Roblox.ItemPurchase.strings.priceChangeText,"<span class='currency-color CurrencyColor"+n.expectedCurrency+"'>"+n.expectedPrice+"<\/span>","<span class='currency-color CurrencyColor"+n.currentCurrency+"'>"+n.currentPrice+"<\/span>"),acceptText:Roblox.ItemPurchase.strings.buyNowText,acceptColor:Roblox.GenericConfirmation.green,onAccept:o,declineText:Roblox.ItemPurchase.strings.cancelText,footerText:String.format(Roblox.ItemPurchase.strings.balanceText,(n.currentCurrency==1?"R$":"Tx")+n.balanceAfterSale),allowHtmlContentInBody:!0,dismissable:!0}))}function y(n){var f=$(n),k,p,g,s,w,nt,tt,b,v,it;if(!f.hasClass("btn-disabled-primary")){if(k=f.attr("data-bc-requirement"),k>a){showBCOnlyModal("BCOnlyModal");return}var rt=f.attr("data-item-name"),y=parseInt(f.attr("data-expected-price")),o=f.attr("data-expected-currency"),ut=f.attr("data-seller-name"),d=f.attr("data-asset-type"),ft=f.attr("data-item-id");if(t=d=="Place",h==="True"){e();return}if(p=!1,f.hasClass("rentable")&&(p=!0),g=o=="1"?parseInt(c):parseInt(l),s=g-y,w="",w=p?Roblox.ItemPurchase.strings.rentText:Roblox.ItemPurchase.strings.buyTextLower,s<0){nt={shortfallPrice:0-s,currentCurrency:o,showDivID:"InsufficientFundsView"};i(nt);return}tt=$("#ItemPurchaseAjaxData").attr("data-imageurl");b="";b=y==0?"<span class='currency CurrencyColorFree'>"+Roblox.ItemPurchase.strings.freeText+"<\/span>":"<span class='currency CurrencyColor"+o+"'>"+y+"<\/span>";v="";v=o=="1"?"R$":"Tx";v+=r(s);it=function(){u(n,"PurchaseVerificationView")};Roblox.GenericConfirmation.open({titleText:Roblox.ItemPurchase.strings.buyItemTitle,bodyContent:String.format(Roblox.ItemPurchase.strings.buyItemText,w,rt,d,ut,b,t?Roblox.ItemPurchase.strings.accessText:""),imageUrl:tt,acceptText:t?Roblox.ItemPurchase.strings.buyAccessText:Roblox.ItemPurchase.strings.buyNowText,acceptColor:Roblox.GenericConfirmation.green,onAccept:it,declineText:Roblox.ItemPurchase.strings.cancelText,footerText:String.format(Roblox.ItemPurchase.strings.balanceText,v),allowHtmlContentInBody:!0,dismissable:!0,onOpenCallback:function(){$(".ConfirmationModal .roblox-item-image").html("").attr("data-item-id",ft);Roblox.require("Widgets.ItemImage",function(n){n.load($(".ConfirmationModal .roblox-item-image"))})}})}}function s(i){var f=i.Price==0?"<span class='currency CurrencyColorFree'>"+Roblox.ItemPurchase.strings.freeText+"<\/span>":"<span class='currency CurrencyColor"+i.Currency+"'>"+i.Price+"<\/span>";var e=$("#ItemPurchaseAjaxData").attr("data-imageurl"),o=function(){var n=$("#ItemPurchaseAjaxData").attr("data-continueshopping-url");n!=undefined&&n!=""&&(document.location.href=n)},r=!1,u="";i.AssetIsWearable&&(u="<a class='CustomizeCharacterLink' href='/My/Character.aspx'>"+Roblox.ItemPurchase.strings.customizeCharacterText+"<\/a>",r=!0);Roblox.GenericConfirmation.open({titleText:Roblox.ItemPurchase.strings.purchaseCompleteTitle,bodyContent:String.format(Roblox.ItemPurchase.strings.purchaseCompleteText,i.TransactionVerb,i.AssetName,i.AssetType,i.SellerName,f,t?Roblox.ItemPurchase.strings.accessText:""),imageUrl:e,acceptText:Roblox.ItemPurchase.strings.continueShoppingText,xToCancel:!0,onAccept:o,onCancel:function(){i.IsMultiPrivateSale&&window.location.reload()},declineColor:Roblox.GenericConfirmation.none,footerText:u,allowHtmlContentInBody:!0,allowHtmlContentInFooter:r,dismissable:!0,onOpenCallback:function(){$(".ConfirmationModal .roblox-item-image").html("").attr("data-item-id",i.AssetID);Roblox.require("Widgets.ItemImage",function(n){n.load($(".ConfirmationModal .roblox-item-image"))})}});n(i)}if(!(this instanceof Roblox.ItemPurchase))return new Roblox.ItemPurchase(n);var h=$("#ItemPurchaseAjaxData").attr("data-authenticateduser-isnull"),c=$("#ItemPurchaseAjaxData").attr("data-user-balance-robux"),l=$("#ItemPurchaseAjaxData").attr("data-user-balance-tickets"),a=$("#ItemPurchaseAjaxData").attr("data-user-bc"),f=$("#ItemPurchaseAjaxData").attr("data-alerturl"),p=$("#ItemPurchaseAjaxData").attr("data-builderscluburl"),t=!1;return{showProcessingModal:o,purchaseItem:u,openPurchaseVerificationView:y,openPurchaseConfirmationView:s,redirectToLogin:e,purchaseConfirmationCallback:n,openErrorView:i,addCommasToMoney:r,formatMoney:v}};Roblox.ItemPurchase.ModalClose=function(n){$.modal.close("."+n)};

;// modules/Widgets/ItemImage.js
Roblox.define("Widgets.ItemImage",[],function(){function i(n){var t=$(n);return{imageSize:t.attr("data-image-size")||"large",imageSizeX:t.attr("data-image-size-x")||"420",imageSizeY:t.attr("data-image-size-y")||"420",isStatic:typeof t.attr("data-is-static")!="undefined",noClick:typeof t.attr("data-no-click")!="undefined",noOverlays:typeof t.attr("data-no-overlays")!="undefined",assetId:t.attr("data-item-id")||0}}function r(n,t){var o,i,r,u,f,e;t.bcOverlayUrl!=null&&(o=$("<img>").attr("src",t.bcOverlayUrl).attr("alt","Builders Club").css("position","absolute").css("left","0").css("bottom","0").attr("border",0),n.after(o));t.limitedOverlayUrl!=null&&(i=$("<img>").attr("alt",t.limitedAltText).css("position","absolute").css("left","0").css("bottom","0").attr("border",0),t.bcOverlayUrl!=null&&(t.imageSize=="small"?i.load(function(){i.css("left",34)}):i.load(function(){i.css("left",46)})),i.attr("src",t.limitedOverlayUrl),n.after(i));t.deadlineOverlayUrl!=null&&(r=$("<img>").attr("alt","Deadline").attr("border",0),r.attr("src",t.deadlineOverlayUrl),n.after(r));t.iosOverlayUrl!=null?(u=$("<img>").attr("alt","iOS Only").attr("border",0),u.attr("src",t.iosOverlayUrl),n.after(u)):t.saleOverlayUrl!=null?(f=$("<img>").attr("alt","Sale").attr("border",0),f.attr("src",t.saleOverlayUrl),n.after(f)):t.newOverlayUrl!=null&&(e=$("<img>").attr("alt","New").attr("border",0).css(style="position","absolute").css("top","0px").css("right","0px"),e.attr("src",t.newOverlayUrl),n.after(e))}function t(u,f){for($.type(u)!=="array"&&(u=[u]);u.length>0;){for(var o=u.splice(0,10),s=[],e=0;e<o.length;e++)s.push(i(o[e]));$.getJSON(n.endpoint,{params:JSON.stringify(s)},function(n,i){return function(u){for(var e,a,h,v=[],o=0;o<u.length;o++)if(e=u[o],e!=null){var c=n[o],s=$(c),l=$("<div>").css("position","relative").css("overflow","hidden");s.html(l);s=l;i[o].noClick||(a=$("<a>").attr("href",e.url),s.append(a),s=a);h=i[o].imageSize!=="custom"?Roblox.GlobalImageSizes?$("<img>").attr("title",e.name).attr("alt",e.name).attr("border",0).attr("height",Roblox.GlobalImageSizes[i[o].imageSize]).attr("width",Roblox.GlobalImageSizes[i[o].imageSize]).addClass("original-image modal-thumb"):$("<img>").attr("title",e.name).attr("alt",e.name).attr("border",0).attr("height",110).attr("width",110).addClass("original-image modal-thumb"):$("<img>").attr("title",e.name).attr("alt",e.name).attr("border",0).attr("height",i[o].imageSizeY).attr("width",i[o].imageSizeX).addClass("original-image modal-thumb");h.load(function(n,t,i,u){return function(){n.width(t.width);n.height(t.height);r(i,u)}}(l,c,h,e));s.append(h);h.attr("src",e.thumbnailUrl);e.thumbnailFinal||v.push(c)}f=f||1;f<4&&window.setTimeout(function(){t(v,f+1)},f*2e3)}}(o,s))}}function u(){t($(n.selector+":empty").toArray())}var n={selector:".roblox-item-image",endpoint:"/thumbs/itemimage.ashx?jsoncallback=?"};return{config:n,load:t,populate:u}});

;// Universes/PlaceSelectorModal.js
var Roblox=Roblox||{};Roblox.PlaceSelector=function(){function i(n){var u=n.name.escapeHTML(),r=n.gameName,t,i;return r==""&&(r="None"),t=$(".place-selector.template").clone().removeClass("template"),t.show(),i=t.find(".place-image").data("retry-url-template"),i+=i.indexOf("?")!==-1?"&":"?",i+="assetId="+n.placeId,t.find(".place-image").attr("data-retry-url",i),t.attr("title",u),t.attr("data-placeId",n.placeId),t.attr("data-notSelectable",n.isRootPlace),n.isRootPlace&&(t.removeClass("selectable"),t.addClass("not-selectable"),t.find(".root-place").show()),t.find(".place-name").text(n.name).attr("title",u),t.find(".game-name-text").text(r).attr("title",r.escapeHTML()),t}function r(n,i){var r=$(".place-selector-modal").data("place-loader-url");r=r+"&startIndex="+n+"&maxRows="+i;t!==undefined&&(r=t(n,i));$.ajax({type:"GET",url:r,contentType:"application/json; charset=utf-8",cache:!1,success:function(n){Roblox.PlaceSelectorPager.update(n)},error:function(){$("#PlaceSelectorItemContainer").addClass("empty").text(anErrorOccurred)}})}function u(){$("[data-retry-url]").loadRobloxThumbnails()}function f(i,r){t=r;Roblox.PlaceSelectorPager=new DataPager(0,5,"PlaceSelectorItemContainer","PlaceSelectorPagerContainer",Roblox.PlaceSelector.GetPlaceSelector,Roblox.PlaceSelector.FormatPlaceSelectorHTML,Roblox.PlaceSelector.FormatPlaceSelectorCallback,{Paging_PageNumbers_AreLinks:!1});n=i;$(".PlaceSelectorModal").modal({overlayClose:!0,escClose:!0,opacity:80,overlayCss:{backgroundColor:"#000"}})}function e(){$.modal.close()}function o(){$(document).on("click",".place-selector-modal .place-selector",function(){var i=$(this).data("notselectable"),t;i||(t=$(this).data("placeid"),n!==undefined&&n(t),Roblox.PlaceSelector.Close())})}var n,t;return{Init:o,GetPlaceSelector:r,FormatPlaceSelectorHTML:i,FormatPlaceSelectorCallback:u,Open:f,Close:e}}();

;// UserAssetsPane.js
function BindMouseClick(){$(".SetAddButton").click(function(){var t=$(this).parent().parent().attr("id").replace("setList_",""),i=$(this).children(".setId")[0].value,n="set_"+i+"_"+t,r="waiting"+n;$(n).append("<img src='/images/spinners/spinner16x16.gif' id='"+r+"'");$.ajax({type:"POST",async:!0,cache:!1,timeout:5e4,url:"/Sets/SetHandler.ashx?rqtype=addtoset&assetId="+t+"&setId="+i,success:function(t){t!==null&&($("#"+n).removeClass("SetAddButton"),$("#"+n).addClass("SetAddButtonAlreadyContainsItem"),$("#"+n).unbind("click"),$("#"+r).remove())},failure:function(n){n!==null}})});$(".creation-context").click(function(){var t=$(".universe-creations-text").data("userid"),i=$(this).data("creationcontext"),n;return $("li.active").removeClass("active"),$(this).parent().addClass("active"),n={creationContext:i,userId:t,startIndex:0},$.get("/universes/get-games-by-context",n,function(n){$("#RepeatingUserAssetData").html(n)}),!1})}function BindMouseOver(){$(".SetList").hover(function(){var i=$(this).ID,n,t;$(".SetListDropDown").each(function(){$(this).parent().attr("id")!=i&&$(this).hide()});n=new Date;t=Date.parse(n.toUTCString())+500;$(this).attr("mouseovertimeout",t);$(this).find("div").show()},function(){var n=this;window.setTimeout(function(){var t=$(n).attr("mouseovertimeout"),i=Date.parse((new Date).toUTCString());t>i||$(n).find("div").fadeOut()},500)})}function BindNavPills(){$("ul.nav-pills li").click(function(){$(".nav-pills li.active").removeClass("active");$(this).addClass("active")})}$(document).ready(function(){BindMouseClick();BindNavPills()});Sys.Application.add_load(BindMouseClick);Sys.Application.add_load(BindMouseOver);Sys.Application.add_load(BindNavPills);

;// CreateSetPanel.js
function onNameChange(n){ismaxlength(n);updateRegularNameDisplay(n)}function onSuperSafeNameChange(n,t){chkSelect(n,t);updateSuperSafeNameDisplay()}function chkSelect(n,t){for(var i,e,u,f=[],r=0;r<n.options.length;r++)n.options[r].selected&&f.push(n.options[r].value);if(f.length>t)for(alert(Roblox.CreateSetPanel.Resources.youMaySelect+t+Roblox.CreateSetPanel.Resources.elementsInList),i=0;i<n.length;i++){for(e=!1,u=0;u<prevSelected.length;u++)if(prevSelected[u]==n[i].value){n.options[i].selected=!0;e=!0;break}e||(n.options[i].selected=!1)}else prevSelected=f}function updateSuperSafeNameDisplay(){for(var r,u,t="",i=!0,f=document.getElementById(superSafeAdjectiveListClientId),n=0;n<f.options.length;n++)f.options[n].selected&&(i||(t+=" "),i=!1,t+=f.options[n].value);for(r=document.getElementById(superSafeCategoryListClientId),n=0;n<r.options.length;n++)r.options[n].selected&&(i||(t+=" "),i=!1,t+=r.options[n].value);for(u=document.getElementById(superSafeNameListClientId),n=0;n<u.options.length;n++)u.options[n].selected&&(i||(t+=" ",i=!1),i=!1,t+=u.options[n].value);$("#NameDisplay").html(userName+"'s "+t)}function updateRegularNameDisplay(n){n.value.length>0?$("#NameDisplay").html(userName+"'s "+n.value.escapeHTML()):$("#NameDisplay").empty()}function ismaxlength(n){var t=n.getAttribute?parseInt(n.getAttribute("maxlength")):"";n.getAttribute&&n.value.length>t&&(n.value=n.value.substring(0,t))};

;// fileUploadUnsupported.js
$(function(){typeof Roblox!="undefined"&&typeof Roblox.FileUploadUnsupported!="undefined"&&typeof Roblox.FileUploadUnsupported.Resources!="undefined"&&$("input[type='file']:disabled").after("<div style='color:red;font-size:11px'>"+Roblox.FileUploadUnsupported.Resources.notSupported+"<\/div>")});

;// GenericConfirmation.js
typeof Roblox=="undefined"&&(Roblox={});typeof Roblox.GenericConfirmation=="undefined"&&(Roblox.GenericConfirmation=function(){function y(){n.isOpen=!1;r()}function p(r){var a,e,o,s,l;n.isOpen=!0;a={titleText:"",bodyContent:"",footerText:"",acceptText:Roblox.Resources.GenericConfirmation.yes,declineText:Roblox.Resources.GenericConfirmation.No,acceptColor:u,declineColor:f,xToCancel:!1,onAccept:function(){return!1},onDecline:function(){return!1},onCancel:function(){return!1},imageUrl:null,allowHtmlContentInBody:!1,allowHtmlContentInFooter:!1,dismissable:!0,fieldValidationRequired:!1,onOpenCallback:function(){}};r=$.extend({},a,r);h.overlayClose=r.dismissable;h.escClose=r.dismissable;e=$(t);e.html(r.acceptText);e.attr("class","btn-large "+r.acceptColor);e.unbind();e.bind("click",function(){return v(e)?!1:(r.fieldValidationRequired?g(r.onAccept):c(r.onAccept),!1)});o=$(i);o.html(r.declineText);o.attr("class","btn-large "+r.declineColor);o.unbind();o.bind("click",function(){return v(o)?!1:(c(r.onDecline),!1)});$('[data-modal-handle="confirmation"] div.Title').text(r.titleText);s=$("[data-modal-handle='confirmation']");r.imageUrl==null?s.addClass("noImage"):(s.find("img.GenericModalImage").attr("src",r.imageUrl),s.removeClass("noImage"));r.allowHtmlContentInBody?$("[data-modal-handle='confirmation'] div.Message").html(r.bodyContent):$("[data-modal-handle='confirmation'] div.Message").text(r.bodyContent);$.trim(r.footerText)==""?$('[data-modal-handle="confirmation"] div.ConfirmationModalFooter').hide():$('[data-modal-handle="confirmation"] div.ConfirmationModalFooter').show();r.allowHtmlContentInFooter?$('[data-modal-handle="confirmation"] div.ConfirmationModalFooter').html(r.footerText):$('[data-modal-handle="confirmation"] div.ConfirmationModalFooter').text(r.footerText);$("[data-modal-handle='confirmation']").modal(h);l=$("a.genericmodal-close");l.unbind();l.bind("click",function(){return c(r.onCancel),!1});r.xToCancel||l.hide();r.onOpenCallback()}function a(n){n.hasClass(f)?n.addClass(s):n.hasClass(l)?n.addClass(e):n.hasClass(u)&&n.addClass(o)}function v(n){return n.hasClass(o)||n.hasClass(s)||n.hasClass(e)?!0:!1}function w(){var n=$(t),r=$(i);a(n);a(r)}function b(){var r=$(t),u=$(i),n=o+" "+s+" "+e;r.removeClass(n);u.removeClass(n)}function k(){if(n.isOpen){var i=$(t);i.click()}}function d(){var n=$(i);n.click()}function r(t){n.isOpen=!1;typeof t!="undefined"?$.modal.close(t):$.modal.close()}function c(n){r();typeof n=="function"&&n()}function g(n){if(typeof n=="function"){var t=n();if(t!=="undefined"&&t==!1)return!1}r()}var l="btn-primary",u="btn-neutral",f="btn-negative",e="btn-disabled-primary",o="btn-disabled-neutral",s="btn-disabled-negative",t="#roblox-confirm-btn",i="#roblox-decline-btn",n={isOpen:!1},h={overlayClose:!0,escClose:!0,opacity:80,overlayCss:{backgroundColor:"#000"},onClose:y};return{open:p,close:r,disableButtons:w,enableButtons:b,clickYes:k,clickNo:d,status:n,green:l,blue:u,gray:f,none:"btn-none"}}());$(document).keypress(function(n){Roblox.GenericConfirmation.status.isOpen&&n.which===13&&Roblox.GenericConfirmation.clickYes()});
